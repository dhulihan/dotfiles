# go get's a package and then opens it
# Author: Dave Hulihan

# This it what we should open the go project with
#INIT_PROJECT_CMD="vim"
INIT_PROJECT_CMD="tmux-session"

# disable module supportfor this since we want to download to src not pkg/mod
# NOTE: broken in go 1.22
GO111MODULE=off go get -v $1
if [ $? -ne 0 ]; then
	echo "could not fetch project"
fi


cd ${GOPATH}/src/$1

# don't start up the project if we're already in tmux
if [[ -z $TMUX ]] ; then
  $INIT_PROJECT_CMD
fi
