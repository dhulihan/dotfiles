# start a dev session in the current dir

# if we're already in tmux, we're in a dev session
if [[ -v TMUX ]] ; then
	debug "already in tmux"
	return
fi

# check for presence of git repo
if [[ ! -d ".git" ]] ; then
    debug "$PWD is not a git repo, not creating dev session"
    return
fi

# pull in latest
(git checkout main || git checkout master) && git pull origin

if [[ $? -ne 0 ]] ; then
	warn "failed to pull latest changes, not starting dev session"
	return
fi

# exec in to replace current process
exec tmux-session

